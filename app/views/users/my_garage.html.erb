<%= render "layouts/profileheader",user: @user %>
<section class="section-no-border background-color-light m-0">
  <div class="container py-4">
    <div class="row">
      <div class="col-md-8">
        <h3>Availibility & Pickup Details</h3>
      </div>
      <div class="col-md-4 text-right">
        <%= link_to 'Edit', new_car_path, data: {toggle: "modal", target: "#availibailty"}, class:"btn btn-sm btn-primary mt-2" %>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
          <ul class="custom-list-style-1 p-0 mb-0">
              <li>
                  <span class="text-color-dark">Pickup Suburb:</span>
                  <span class="custom-text-color-2"><%= @user.pickup_suburb %></a></span>
              </li>
              <li>
                  <span class="text-color-dark">Pickup State:</span>
                  <span class="custom-text-color-2">  <%= @user.pickup_state %></span>
              </li>
              <li>
                  <span class="text-color-dark">Pickup Postal Code:</span>
                  <span class="custom-text-color-2"><%= @user.pickup_postcode %></span>
              </li>

          </ul>
      </div>
      <div class="col-md-6">
          <ul class="custom-list-style-1 p-0 mb-0">
              <li>
                  <span class="text-color-dark">Rentals:</span>
                  <span class="custom-text-color-2"><%= @user.rental %></span>
              </li>

              <li>
                  <span class="text-color-dark">Advance Notice:</span>
                  <span class="custom-text-color-2"><%= @user.advance_notice %></span>
              </li>
              <li>
                  <span class="text-color-dark">Availibility Days:</span>
                  <span class="custom-text-color-2"><%= (JSON.parse(@user.availibility_days)).to_sentence if @user.availibility_days.present? %></span>
              </li>
          </ul>
      </div>
    </div>
    <hr>
    <div class="row">
      <div class="col-md-8">
      <h3>Listed Cars</h3>
        
      </div>
      <div class="col-md-4 text-right">
        <%= link_to 'Add New Car', new_car_path, class:"btn btn-sm btn-primary" %>
      </div>
    </div>
    <table class="table table-bordered">
          <thead>
            <tr>
              <th>Year</th>
              <th>Make</th>
              <th>Model</th>
              <th>Status</th>
              <% if current_user.admin %>
                <th>Posted by</th>
              <% end %>
              <th colspan=3>View</th>
            </tr>
          </thead>
          <tbody>
            <% @cars.each do |car| %>    
              <% if can? :read, car %>
                <tr>
                  <td><%= car.year %></td>
                  <td> <%= car.make %></td>
                  <td> <%= car.model %></td>
                  <td><%= car.status.humanize %></td>
                  <% if current_user.admin %>
                    <td> <%= car.user.name %></td>
                  <% end %>
                  
                <td><%= link_to 'Show', car_path(car), class:"btn btn-primary btn-sm" %></td>
                <td><%= link_to 'Edit'.html_safe, edit_car_path(car), class:"btn btn-primary btn-sm" %></td>
                <td><%= link_to '<i class="fas fa-trash icon-chat" style="font-size: 19px" title="Delete"></i>'.html_safe, car, method: :delete, data: { confirm: 'Are you sure?' } %></td>
                
                </tr>
              <% end %>
            <% end %>
            
          </tbody>
        </table>
  
  </div>
</section>


<%= render "layouts/update_availibility",user: @user %>
